<!-- Polymer Imports -->
<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="membership-application.html" />
<link rel="import" href="membership-agreement.html" />
<link rel="import" href="guardian-membership-agreement.html" />

<polymer-element name="page-register">

<!-- Polymer Element Template-->
<template>
    <style>
    :host {
	    font-size: 1.2rem;
	    font-weight: 300;
    }
    
    paper-button {
        margin: 10px 0px 10px 0px;
    }
    </style>
 
    <div id="content">
		<core-pages selected="0" notap id="register_pages">
		    <section id="section_membership_application" on-nextbutton="{{nextPage}}"><membership-application></membership-application></section>
		    <section id="section_membership_agreement" on-nextbutton="{{nextPage}}"><membership-agreement></membership-agreement></section>
		    <section id="section_minor_membership_agreement" on-nextbutton="{{nextPage}}"><guardian-membership-agreement></guardian-membership-agreement></section>
		    <section id="section_membership_done">Done!</section>
		</core-pages>
	</div>
</template>

<!-- Polymer Element Script -->
<script>
    Polymer( 'page-register', {
        ready: function() {
        	this.addEventListener('reset', this.reset);
        },
        nextPage: function(e) {
        	var pageEnum = {
        		APPLICATION : 0,
        		AGREEMENT : 1,
        		MINOR_AGREEMENT : 2,
        		DONE: 3
        	};

        	var pages = this.$.register_pages;
        	var newPage = pages.selected;

        	// Determine the new page based on the current page
        	if (pages.selected == pageEnum.APPLICATION) {
        		if (e.detail.isMinor) {
        			newPage = pageEnum.MINOR_AGREEMENT;
        		}
        		else {
        			newPage = pageEnum.AGREEMENT;
        		}
        	}
        	else {
        		newPage = pageEnum.DONE;
        	}
        	
        	pages.selected = newPage;
        	// TODO: scroll to top
        },
        reset: function() {
            var pages = this.$.register_pages;
            pages.selected = 0;
            
            // TODO: clear all data in the form
            // TODO: scroll to top
        }
    });
</script>
</polymer-element>
